# Example configuration for distributed SlayerFS tests.
# Copy to scripts/distributed-tests/cluster.env and adjust for your environment.

# Cluster topology
CLUSTER_NODES="node-a node-b node-c"
CLIENT_NODES="node-a node-b"
META_NODES="node-a"
PRIMARY_CLIENT="node-a"

# SSH settings
SSH_USER="ubuntu"
SSH_KEY="$HOME/.ssh/id_rsa"
SSH_PORT=22
SSH_OPTS="-o BatchMode=yes -o StrictHostKeyChecking=accept-new"
REMOTE_SUDO="sudo -n"  # Use "sudo" if passwordless sudo is not configured

# Remote directories
REMOTE_WORKDIR="/tmp/slayerfs-dist"
REMOTE_RESULTS_DIR="/tmp/slayerfs-results"

# Local results directory (relative to repo root or absolute)
RESULTS_DIR="./results"

# SlayerFS deployment
SLAYERFS_BUILD=1
SLAYERFS_EXAMPLE="persistence_demo"
SLAYERFS_META_BACKEND="etcd"            # etcd | redis | postgres | sqlite
SLAYERFS_META_ETCD_URLS="http://node-a:2379,http://node-b:2379,http://node-c:2379"
SLAYERFS_META_URL="redis://node-a:6379/1"
SLAYERFS_CONFIG_REMOTE="$REMOTE_WORKDIR/slayerfs.yml"
SLAYERFS_MOUNT_DIR="/mnt/slayerfs"
SLAYERFS_META_DIR="/var/lib/slayerfs/meta"
SLAYERFS_DATA_DIR="/var/lib/slayerfs/data"
SLAYERFS_LOG_DIR="/var/log/slayerfs"
ETCD_DATA_DIR="/var/lib/etcd"
ETCD_LOG_FILE="/tmp/etcd.log"

# Workload toggles
RUN_FIO=1
RUN_MDTEST=1
RUN_IOZONE=0
RUN_XFSTESTS=0
TEST_PROGRESS_INTERVAL=10

# fio settings
FIO_RUNTIME=60
FIO_SIZE="20G"
FIO_NUMJOBS=4
FIO_IODEPTH=16
FIO_BS_SEQ="1M"
FIO_BS_RAND="4K"
FIO_RWMIXREAD=70
FIO_DIRECT=0

# mdtest settings (use MDTEST_ARGS to override)
MDTEST_NFILES=10000
MDTEST_NPROCS=4

# Cleanup settings
CLEANUP_DATA=0  # Set to 1 to also clean etcd metadata and data directories on cleanup

# iozone settings
IOZONE_SIZE="1G"           # Test file size
# IOZONE_ARGS="-a -A -r 4k -i 1m -s ${IOZONE_SIZE}"  # Auto mode (custom args override defaults)

# xfstests settings
XFSTESTS_DIR="/opt/xfstests"
XFSTESTS_ARGS="-g quick"
